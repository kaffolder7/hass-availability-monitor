## 
# Edge Case: API Response Other Than 200 or 204
# 
# This test simulates unexpected API responses (e.g., 500 Internal Server Error).
# 
# Simulating an Unexpected API Response:
#   Use a Python mock server to return an HTTP 500 status code:
#     ```
#     python3 -m http.server 8000 &
#     echo -e "HTTP/1.1 500 Internal Server Error\r\nContent-Type: text/plain\r\n\r\n" > error_response.txt
#     cat error_response.txt | nc -l 8000 &
#     ```
# 
# Expected Behavior:
#   - The script logs the unexpected response status code (500).
#   - Retries the configured number of times.
#   - Sends a “down” notification if all retries fail.
# 
# Test command:
# `../check_endpoint.sh > unexpected_response.log 2>&1`
# 
# Verify:
#   ```
#   grep "Unexpected response code: 500" unexpected_response.log
#   grep "Unexpected API response." unexpected_response.log
#   ```
# 
HASS_API_URL="http://localhost:8000/unexpected"
HASS_AUTH_TOKEN="dummy_token"
SMS_TO="+1234567890"
SMS_FROM="sender@example.com"
ENDPOINT_DOWN_MESSAGE="Unexpected API response."
ENDPOINT_UP_MESSAGE="API recovered from an error."